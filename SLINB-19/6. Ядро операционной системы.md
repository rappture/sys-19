# Домашнее задание к занятию «Ядро операционной системы»
<br>

> ### Задание 1
> При каких событиях выполнение процесса переходит в режим ядра?  
> *Приведите ответ в свободной форме.*
>
### Ответ к заданию 1
Выполнение процесса переходит в режим ядра при:
*	системных вызовах;
*	аппаратных прерываниях.

---

> ### Задание 2
> Найдите имя автора модуля libcrc32c.  
> *В качестве ответа приложите скриншот вывода команды.*
>
### Ответ к заданию 2
<kbd><img src="/img/slinb-6.2.1.png"></kbd>
 
---

> ### Задание 3
> Используя утилиту strace выясните какой системный вызов использует команда cd.  
> Примечание: она не является внешним файлом, но для наших целей можно схитрить: **strace bash -c 'cd /tmp'**.  
> *В качестве ответа напишите название системного вызова.*
>
### Ответ к заданию 3
Название системного вызова: ```chdir```

---

> ### Дополнительные задания (со звездочкой*)
> Эти задания дополнительные (необязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.
>
> ### Задание 4
> Соберите свой модуль и загрузите его в ядро.
> Примечание: лучше использовать чистую виртуальную машину, чтобы нивелировать шанс сломать систему.
> 1) Установим необходимые пакеты:
> ```bash
> apt-get install gcc make linux-headers-$(uname -r)
> ```
> 2) Создаем файл модуля:
> ```bash
> mkdir kmod-hello_world
> ```
> ```bash
> cd kmod-hello_world/
> ```
> ```bash
> touch ./mhello.c
> ```
> 
> ```bash
> #define MODULE
> #include <linux/module.h>
> #include <linux/init.h>
> #include <linux/kernel.h>
>
> MODULE_LICENSE("GPLv3");
>
> int init_module(void){
>     printk("<1> Hello,World\n");
>     return 0;
> }
> 
> void cleanup_module(void){
>     printk("<1> Goodbye.\n");
> }
> ```
>
> 3) Создаем Makefile: 
> ```bash
> touch ./Makefile
> ```
>
> ```bash
> obj-m += mhello.o
>
> hello-objs := mhello.c
>
> all:
> 	make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) modules
>
> clean:
> 	make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) clean
> ```
>
> *Обратите внимание, что отступы перед make – это табуляция, а не пробелы. Для синтаксиса **Makefile** это важно.*
>
> 4) Собираем модуль и устанавливаем его с помощью insmod.
> ```bash
> make all
> ```
> ```bash
> insmod path/to/module.ko
> # sudo insmod /home/shkutova_yuliya/kmod-hello_world/mhello.ko
> ```
> *В качестве ответа приложите скриншот вывода установки модуля в dmesg.*
>
### Ответ к заданию 4
<kbd><img src="/img/slinb-6.4.1.png"></kbd>
 
\+ ниже результаты отключения и повторного подключения модуля.

<kbd><img src="/img/slinb-6.4.2.png"></kbd>
 

