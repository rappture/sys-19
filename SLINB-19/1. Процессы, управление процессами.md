# Домашнее задание к занятию «Процессы, управление процессами»
<br>

> ### Задание 1
> Рассмотрим загрузку данных и многопоточность. В описанных ниже ситуациях поможет ли использование нескольких потоков для скачивания уменьшить время общей загрузки?
> 1.	100 файлов на разных Web-серверах, суммарным объёмом 10 Гбайт, через подключение со скоростью 1Мбит\с;
> 2.	100 файлов на разных Web-серверах, суммарным объёмом 10 Гбайт, через подключение со скоростью 10 Гбит\с;
> 3.	1 файл объёмом 10 Гбайт находящийся в торрентах;
> 4.	1 файл объёмом 10 Гбайт находящийся на FTP-сервере;
> 5.	10 файлов объёмом по 1 Гб находящихся в общей папке компьютера секретаря.
> 
> *Приведите ответ для каждого случай в свободной форме (лучше использовать один поток скачивания, несколько, всё равно) со своим комментарием.*
> 
### Ответ к заданию 1
1.	Один поток.  
Скорее всего, серверы «отдают» скорость больше 1 Мбит\с, и многопоточность не уменьшит общее время на скачивание всех файлов. Если запустим все загрузки параллельно, то скорость разделится между ними и мы будем дольше ждать, пока получим хотя бы 1 готовый файл.
2.	Несколько потоков.  
Скорее всего, серверы «отдают» скорость меньше, чем 10 Гбит\с. Если скачивание будет в 1 поток, получится, что использован не весь потенциал подключения. Использование многопоточности, вероятно, позволит использовать все 10 Гб\с, а следовательно, и уменьшить общее время загрузки.
3.	Несколько потоков.  
Работа торрентов устроена таким образом, что файлы скачиваются частями с различных устройств, связывающихся друг с другом, условно говоря, напрямую. В таких условиях многопоточность обеспечивает наилучшую скорость.
4.	Зависит от того, накладываются ли сервером ограничения по скорости и количеству подключений, имеется ли возможность загружать разные части файла одновременно.  
Если скорость, с которой сервер разрешает скачивание, выше «нашей» скорости – все равно, сколько потоков мы будем использовать. Общее время загрузки будет одинаково.  
Если сервер накладывает ограничение на скорость скачивания, многопоточность может помочь сократить время загрузки.
5.	Все равно.  
Велика вероятность, что «бутылочным горлышком» станет дисковая подсистема.

---

> ### Задание 2
> Объясните, что делает команда:  
> ps -aux | grep root | wc -l >> root
> 
> *Ответ напишите в свободной форме.*
> 
> Примечание:  
> Если вы встречаете неизвестную команду Linux, либо неизвестные параметры команды, то можете вызвать встроенную помощь: man <команда>
> 
> Например:  
> •	man ps;  
> •	man grep;  
> •	man wc.
> 
### Ответ к заданию 2
С помощью первой команды ```ps -aux``` получаем список всех запущенных в системе процессов с указанием их пользователей*.  
С помощью «пайпа»  ```|```  передаем полученный вывод первой команды на ввод второй команде.  
С помощью второй команды ```grep root``` из полученных строк отбираем только те, которые содержат слово "*root*".   
С помощью «пайпа»  ```|```  передаем полученный вывод второй команды на ввод третьей команде.  
С помощью третьей команды ```wc -l``` рассчитываем количество полученных строк.  
С помощью  ```>> root``` записываем получившуюся цифру количества строк в текущий каталог в файл с наименованием "*root*" (если файл с таким наименованием уже есть в папке, он будет дополнен, т.е. ранее введенная в него информация не затрется; если ранее такого файла в папке не было, будет создан новый).  

\* - в описании к «ps» сказано, что «-aux» может быть воспринято как запрос на вывод всех процессов, которыми владеет пользователь с именем «x», а при отсутствии такого пользователя – как «aux» с выводом предупреждения. Однако на практике при вводе как «-aux», так и «aux», вывод был идентичен, а предупреждения отсутствовали (Debian GNU/Linux 11 (bullseye)).

---

> ### Задание 3
> Напишите команду, которая выводит все запущенные процессы пользователя root в файл "*user_root_ps*".
> 
### Ответ к заданию 3
Можно использовать различные вариации. Ниже несколько примеров.  
или ```ps -fu root > "user_root_ps"```   
или ```ps U root > "user_root_ps"```  
или ```ps -U root -u root > "user_root_ps"```  

---

> ### Задание 4
> Начинающий администратор захотел вывести все запущенные процессы пользователя с логином "2" в файл "*user_2_ps*".
> 
> Для этого он набрал команду:  
> ps -U 2> user_2_ps
> 
> Затем, он аналогично повторил для пользователя с логином "5" вывод в файл "user_5_ps":  
> ps -U 5> user_5_ps
> 
> Вопрос:  
> Почему вывод этих команд и содержимое файлов сильно отличаются друг от друга? Как должны выглядеть правильные команды?
> 
> Примечание:  
> Если у вас в системе нет пользователей "2" и/или "5" (это нормальная ситуация), то утилита ps выводит только одну строку:  
> PID TTY TIME CMD  
> 
### Ответ к заданию 4
При вводе команды ```ps -U 2> user_2_ps``` в файл перенаправляется stderr (стандартный поток ошибок, обозначаемый цифрой 2).  
Пользователь, для которого требуется вывести процессы, остается не указан.  
Таким образом в файле мы увидим информацию об ошибке («error: list of real users must follow -U» и пр.).

При вводе команды ```ps -U 5> user_5_ps``` в файл перенаправляется поток, обозначаемый цифрой 5.  
Пользователь, для которого требуется вывести процессы, остается не указан.  
Таким образом, ошибка («error: list of real users must follow -U» и пр.) будет выведена на экран, а файл останется пустым, поскольку вывод какой-либо информации в поток 5 не предусмотрен.

Правильные команды (если мы хотим получить списки c отбором именно по «real user name») должны выглядеть так:  
```ps -U 2 > user_2_ps``` и ```ps -U 5 > user_5_ps```.
