# Домашнее задание к занятию «Циклы и функции»
<br>

> ### Задание 1.
> Напишите скрипт.  
> Скрипт должен выводить на экран все числа от 1 до 100, которые делятся на 3.  
> Для выполнения задания используйте цикл.
>
### Ответ к заданию 1.
:large_blue_diamond:	Скрипт:

```bash
#!/bin/bash
a=3
for b in {1..100}
do
if [ $((b%a)) -eq 0 ]
then echo $b
fi
done
```

:large_blue_diamond:	Скриншот работы скрипта:

<kbd><img src="/img/bash-2.1.1.png"></kbd>
 
---

> ### Задание 2.
> Напишите скрипт, который каждые 5 секунд будет выводить на экран текущее время и содержимое файла /proc/loadavg.  
> Для выполнения задания используйте цикл.
>
### Ответ к заданию 2.
:large_blue_diamond:	Скрипт:

```bash
#!/bin/bash
i=0
while [ $i -le 4 ]
do
	i=$((i + 1)) && date '+%d.%m.%Y %H:%M:%S' && cat /proc/loadavg && echo ''
	if [ $i == 4 ] 
	then exit
	else sleep 5
	fi
done
```

:large_blue_diamond:	Скриншот работы скрипта:

<kbd><img src="/img/bash-2.2.1.png"></kbd>
 
---

> ### Задание 3.
> Напишите функцию для подсчета среднего размера файла в директории.
> *	путь к директории должен передаваться параметром, например avgfile /home/username;
> *	функция должна проверять, что такая директория существует, подсчитывать и выводить на экран средний размер файла в ней;
> *	при подсчете не нужно учитывать поддиректории и символьные ссылки, считать только средний размер файлов в заданной директории.
> *	для вывода среднего достаточно использовать целочисленное значение (стандартное деление в bash)
>
> Предлагается выполнить задание сначала без открытия подсказки своим способом, при возникновении сложностей воспользоваться подробным алгоритмом решения, который описан ниже.
> <details>
> <summary><h10>Подсказка - Примерный алгоритм решения</h10></summary>
>
> 1.	В скрипте объявите функцию. Поместите аргумент в переменную с понятным названием. Проверьте, существует ли заданная в аргументе директория с помощью if.
> 2.	Внутри функции объявите вспомогательные переменные. Одна переменная будет служить для сохранения суммы размеров всех файлов в директории, а другая будет содержать количество файлов.
> 3.	Для перебора файлов внутри директории используйте цикл for.
> 4.	Внутри цикла с помощью if проверяйте, является ли данный объект файлом.
> 5.	Если это файл, то к переменной суммы добавляйте размер файла и увеличивайте на один переменную с количеством файлов (получить размер одного файла можно с помощью stat -c "%s" filename).
> 6.	После выхода из цикла for (перебора всех файлов в директории), разделите значение переменной с суммой размеров файлов на количество этих файлов и выведите результат на экран.
> 7.	В конце скрипта, вызовите только что написанную функцию с аргументом, например avgfile $1
> 8.	Запускайте скрипт ./script3.sh /home/username и смотрите результат.
> 9.	(необязательно) Если все работает, данную функцию можно добавить к себе в .bash_profile и использовать для работы.
> </details>
>
### Ответ к заданию 3.
:large_blue_diamond:	Скрипт:

```bash
#!/bin/bash
#argument "-a" is required for "ls" in order to include hidden files.
avg_file_size () { 
echo "Please enter the path to the directory:"
read path
if [ -d $path ]
then
	total_size=`ls -l $path | grep '^-' | awk '{total+=$5} END{print total}'`
	files_count=`ls -l $path | grep '^-' | wc -l`
	if [ $files_count == 0 ]
		then echo "The directory doesn't contain files."
		else echo "Average file size in the directory is $((total_size/files_count)) bytes."
	fi
else echo "The directory doesn't exist."
fi
}
avg_file_size
```

:large_blue_diamond:	Скриншот работы скрипта:

<kbd><img src="/img/bash-2.3.1.png"></kbd>
