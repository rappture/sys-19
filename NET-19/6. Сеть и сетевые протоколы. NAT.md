# Домашнее задание к занятию «Сеть и сетевые протоколы. NAT»
<br>

> ### Задание 1. Создание внешней сети и настройка NAT
> ВАЖНО. Задание является сквозным и составлено на основе практической задачи из домашней работы “Firewall”.
>
> Описание задания  
> Перед вами стоит задача сделать “внешнюю сеть” интернет-провайдера и создать для сетевых устройств доступность “внешнего мира”
>
> В вашем распоряжении есть две сети:  
> 188.144.1.0/30 - интернет провайдер выделил данную сеть для подключения мини-офиса  
> 188.144.0.0/30 - интернет провайдер выделил данную сеть для подключения главного офиса  
>
> Необходимо подключить каждую из частей офиса подключить к интернет-провайдеру
>
> Требование к результату 
> *	Вы должны отправить файл .pkt с выполненным заданием.
> *	К выполненной задаче добавьте скриншоты с доступностью “внешней сети” и ответы на вопросы.
>
> Процесс выполнения
> 1.	Запустите программу Cisco Packet Tracer
> 2.	В программе Cisco Packet Tracer загрузите предыдущую практическую работу.
> 3.	Текущее физическое соединение между двумя маршрутизаторами необходимо разорвать.
> 4.	Добавьте еще один маршрутизатор интернет-провайдера и соединить его с двумя другими.
> 5.	Между всеми маршрутизаторами необходимо создать сетевую связность.
> 6.	На каждом маршрутизаторе главного и мини-офиса настройте внутренние и внешние интерфейсы (inside, outside)
> 7.	На каждом маршрутизаторе создайте списки доступа сетей, которые будут транслироваться во “внешнюю сеть”
> 8.	На каждом маршрутизаторе создайте NAT-трансляцию с помощью вышеуказанного access-листа.
> 9.	Проверьте доступность с любого конечного устройства доступность роутера интернет-провайдера, командой ping.
> 10.	Во время проверки командой ping посмотрите на каждом роутере списки трансляции адресов. Сделайте скриншот.
>
> Топология после выполнения задания должна выглядеть так:
>
> <kbd><img src="/img/net-6.1.1.png"></kbd>
> 
### Ответ к заданию 1.
**Ссылка на файл \*.PKT:**  
https://github.com/rappture/sys-19/blob/main/conf/net-6/NAT_Task1.pkt

:large_blue_diamond:	На рисунке ниже разрыв текущего соединения между двумя маршрутизаторами.

<kbd><img src="/img/net-6.1.2.png"></kbd>
 
:large_blue_diamond:	На рисунках ниже добавляем роутер провайдера и подключаем его к двум другим.

<kbd><img src="/img/net-6.1.3.png"></kbd>
 
<kbd><img src="/img/net-6.1.4.png"></kbd>
 
:large_blue_diamond:	На рисунках ниже настройка внутренних и внешних интерфейсов (inside, outside) на роутерах главного и мини-офиса (настройка сабинтерфейсов Router0 – отдельным рисунком).

<kbd><img src="/img/net-6.1.5.png"></kbd>
 
<kbd><img src="/img/net-6.1.6.png"></kbd>
 
:large_blue_diamond:	На рисунке ниже создание на роутерах списков доступа сетей, которые будут транслироваться во «внешнюю сеть».

<kbd><img src="/img/net-6.1.7.png"></kbd>
 
:large_blue_diamond:	На рисунке ниже создание на роутерах NAT-трансляций с помощью созданных access-листов.

<kbd><img src="/img/net-6.1.8.png"></kbd>
 
:large_blue_diamond:	На рисунке ниже донастройка роутеров.

<kbd><img src="/img/net-6.1.9.png"></kbd>
 
:large_blue_diamond:	На рисунках ниже проверка доступности роутера интернет-провайдера с конечных устройств и просмотр списков трансляции адресов.

<kbd><img src="/img/net-6.1.10.png"></kbd>
 
<kbd><img src="/img/net-6.1.11.png"></kbd>

---

> ### Задание 2. Создание внутреннего web-сервера и доступа к нему
> ВАЖНО. Задание является сквозным и составлено на основе практической задачи из домашней работы “Firewall”.
>
> Описание задания  
> Перед вами стоит задача обеспечить доступность внутреннего web-сервера из “внешней сети”.
>
> Требование к результату
> *	Вы должны отправить файл .pkt с выполненным заданием
> *	К выполненной задаче добавьте скриншоты с доступностью устройств и ответы на вопросы.
>
> Процесс выполнения
> 1.	Запустите программу Cisco Packet Tracer.
> 2.	В программе Cisco Packet Tracer загрузите предыдущую практическую работу.
> 3.	К коммутатору в мини-офисе добавьте сервер, включите на нем HTTP-сервис и назначьте ip-адрес в любой из vlan.
> 4.	Создайте на маршрутизаторе этой сети static nat-трансляцию для web-сервера с указанием 80 порта.
> 5.	Из сети главного офиса получите доступ к web-серверу по “внешнему ip-адресу” роутера мини-офиса. Сделайте скриншот.
> 6.	Обеспечьте доступность двух локальных сетей (мини-офиса и главного офиса) между собой, согласно новой топологии сети.
>
> Топология после выполнения задания должна иметь следующий вид:
>
> <kbd><img src="/img/net-6.2.1.png"></kbd>
> 
### Ответ к заданию 2.
**Ссылка на файл \*.PKT:**  
https://github.com/rappture/sys-19/blob/main/conf/net-6/NAT_Task2.pkt

:large_blue_diamond:	На рисунках ниже подключение и настройка сервера.

<kbd><img src="/img/net-6.2.2.png"></kbd>
 
<kbd><img src="/img/net-6.2.3.png"></kbd>
 
<kbd><img src="/img/net-6.2.4.png"></kbd>
 
:large_blue_diamond:	На рисунке ниже создание на Router0 static nat-трансляции для web-сервера с указанием 80 порта.

<kbd><img src="/img/net-6.2.5.png"></kbd>
 
:large_blue_diamond:	На рисунках ниже получение доступа к web-серверу по «внешнему ip-адресу» роутера мини-офиса.

<kbd><img src="/img/net-6.2.6.png"></kbd>
 
:large_blue_diamond:	На рисунках ниже обеспечение доступности двух локальных сетей (мини-офиса и главного офиса) между собой.

<kbd><img src="/img/net-6.2.7.png"></kbd>
 
:large_blue_diamond:	На рисунке ниже видно, что ICMP-запрос от хоста в одной локальной сети доходит до хоста в другой локальной сети, но ответ не может быть доставлен из-за того, что он прошел через NAT дважды (на роутере мини-офиса и на роутере главного офиса). 

<kbd><img src="/img/net-6.2.8.png"></kbd>
 
:large_blue_diamond:	Возможным решением проблемы может быть использование NAT NVI. Однако в текущей версии Cisco PT данная технология не реализована.

:large_blue_diamond:	На рисунке ниже альтернативное решение: корректируем ACL роутеров, применяемые для NAT (для примера были взяты 2 подсети). В результате запросы от 192.168.10.0/29 к 192.168.0.0/28 и наоборот не подвергаются NAT и успешно достигают пунктов назначения.

<kbd><img src="/img/net-6.2.9.png"></kbd>
 
<kbd><img src="/img/net-6.2.10.png"></kbd>
 
---

> ### Общие критерии оценки
> Задание считается выполненным при соблюдении следующих условий:
> 1.	Выполнены оба задания.
> 2.	К заданию прикреплено 2 файла .pkt и скриншоты доступности устройств: по итогам выполнения каждого задания.
> 3.	NAT-трансляции созданы правильно и обеспечивают доступность устройств.
> 4.	Правильно функционирующая сеть на основе задания:  
> •	есть доступность устройств между собой в рамках одного маршрутизатора  
> •	есть доступность каждого устройства до второго маршрутизатора в рамках каждого сабинтерфейса  
> •	есть доступность устройств между собой из разных сетей офисов  
> 5.	Web-сервер доступен по “внешнему ip-адресу”.

