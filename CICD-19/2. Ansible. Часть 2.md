# Домашнее задание к занятию «Ansible. Часть 2»
<br>

> ### Задание 1
> Выполните действия, приложите файлы с плейбуками и вывод выполнения.  
>
> Напишите три плейбука. При написании рекомендуем использовать текстовый редактор с подсветкой синтаксиса YAML.
>
> Плейбуки должны:
> 1.	Скачать какой-либо архив, создать папку для распаковки и распаковать скаченный архив. Например, можете использовать официальный сайт и зеркало Apache Kafka. При этом можно скачать как исходный код, так и бинарные файлы, запакованные в архив — в нашем задании не принципиально.
> 2.	Установить пакет tuned из стандартного репозитория вашей ОС. Запустить его, как демон — конфигурационный файл systemd появится автоматически при установке. Добавить tuned в автозагрузку.
> 3.	Изменить приветствие системы (motd) при входе на любое другое. Пожалуйста, в этом задании используйте переменную для задания приветствия. Переменную можно задавать любым удобным способом.
>
### Ответ к заданию 1
**Playbook 1**

:large_blue_diamond:	Почему-то параметр “creates”, встроенный в модуль “unarchive”, не создает новую директорию вне зависимости, указывается полный путь или используется переменная (причину отказа найти не удалось): 

<kbd><img src="/img/cicd-2.1.1.png"></kbd>

<kbd><img src="/img/cicd-2.1.2.png"></kbd>

<kbd><img src="/img/cicd-2.1.3.png"></kbd>

:large_blue_diamond:	Результат выше не меняется и при использовании ad-hoc команды вместо playbook-а:

<kbd><img src="/img/cicd-2.1.4.png"></kbd>

:large_blue_diamond:	В качестве альтернативы пришлось добавить в playbook вторую задачу на создание директории с помощью модуля “file”:

<kbd><img src="/img/cicd-2.1.5.png"></kbd>

<kbd><img src="/img/cicd-2.1.6.png"></kbd>

<kbd><img src="/img/cicd-2.1.7.png"></kbd>

**Playbook 2**

<kbd><img src="/img/cicd-2.1.8.png"></kbd>

<kbd><img src="/img/cicd-2.1.9.png"></kbd>

<kbd><img src="/img/cicd-2.1.10.png"></kbd>

**Playbook 3**

<kbd><img src="/img/cicd-2.1.11.png"></kbd>

<kbd><img src="/img/cicd-2.1.12.png"></kbd>

---

> ### Задание 2
> Выполните действия, приложите файлы с модифицированным плейбуком и вывод выполнения.  
>
> Модифицируйте плейбук из пункта 3, задания 1. В качестве приветствия он должен установить IP-адрес и hostname управляемого хоста, пожелание хорошего дня системному администратору.
>
### Ответ к заданию 2
<kbd><img src="/img/cicd-2.2.1.png"></kbd>

<kbd><img src="/img/cicd-2.2.2.png"></kbd>

---

> ### Задание 3
> Выполните действия, приложите архив с ролью и вывод выполнения.  
>
> Ознакомьтесь со статьёй «Ansible - это вам не bash», сделайте соответствующие выводы и не используйте модули shell или command при выполнении задания.
>
> Создайте плейбук, который будет включать в себя одну, созданную вами роль. Роль должна:
> 1.	Установить веб-сервер Apache на управляемые хосты.
> 2.	Сконфигурировать файл index.html c выводом характеристик каждого компьютера как веб-страницу по умолчанию для Apache. Необходимо включить CPU, RAM, величину первого HDD, IP-адрес. Используйте Ansible facts и jinja2-template
> 3.	Открыть порт 80, если необходимо, запустить сервер и добавить его в автозагрузку.
> 4.	Сделать проверку доступности веб-сайта (ответ 200, модуль uri).
>
> В качестве решения:
> *	предоставьте плейбук, использующий роль;
> *	разместите архив созданной роли у себя на Google диске и приложите ссылку на роль в своём решении;
> *	предоставьте скриншоты выполнения плейбука;
> *	предоставьте скриншот браузера, отображающего сконфигурированный index.html в качестве сайта.
>
### Ответ к заданию 3
:large_blue_diamond:	Ссылка на архив с ролью и playbook-ом:  
https://github.com/rappture/sys-19/blob/main/conf/cicd-2/ansible_hw2.3.tar.gz

<kbd><img src="/img/cicd-2.3.1.png"></kbd>

<kbd><img src="/img/cicd-2.3.2.png"></kbd>

<kbd><img src="/img/cicd-2.3.3.png"></kbd>

<kbd><img src="/img/cicd-2.3.4.png"></kbd>

<kbd><img src="/img/cicd-2.3.5.png"></kbd>

---

<details>
<summary><h3>N.B.</h3></summary>

:green_book: **Заметки для себя**:

<kbd><img src="/img/cicd-2.extra.1.png"></kbd>

</details>
